class Demo{constructor(e,t){this.options=Object.assign({prefix:"demo",theme:"light",name:"demo",ajax:!0,scroll:!0,api:"",debugger:!1,log:!0,ajaxCookie:!1,ajaxTimeout:8e3,ajaxUploadTimeout:2e4,environment:"local"},e||{}),this.const("version","1.1.41"),this.const("ajaxOnceTime",500),this.$={dom:e=>e?document.querySelector(e):null,all(e){if(!e)return[];let t=document.querySelectorAll(e);return t.length>0?Array.from(t):[]},id:e=>e?document.getElementById(e):null},this._init(e=>{t&&t(e)})}js(e,t=1){var n=e,r=this;return t&&(n=this.$.dom(e)),n&&3!==r.$obj(n,1)?{dom:function(){return n},html:function(e){if(!arguments.length)return n.innerHTML;let t=r.$obj(e,1);4!==t&&6!==t||(e=JSON.stringify(e)),n.innerHTML=e},text:function(e){if(!arguments.length)return n.innerText;n.innerText=e},addClass:function(e){if(4===r.$obj(e,1))return e.forEach(e=>{n.classList.add(e)}),1;n.classList.add(e)},removeClass:function(e){var t=n.className;if(4===r.$obj(e,1))return e.forEach(r=>{t.indexOf(r)>=0&&n.classList.remove(e)}),1;t.indexOf(e)>=0&&n.classList.remove(e)},toggleClass:function(e){var t=function(t){n.className.indexOf(t)>=0?n.classList.remove(e):n.classList.add(e)};if(4===r.$obj(e,1))return e.forEach(e=>{t(e)}),1;t(e)},appendChild:function(e){if(!e)return 0;n.appendChild(e)},remove:function(){n.parentNode.removeChild(n)},style:function(e,t){var o="";if(6===r.$obj(e,1))for(var i in e)o+=`${i}:${e[i]};`,t&&(n.style[i]=e[i]);else t=!1,o=e;t||n.setAttribute("style",o)},attr:function(e,t){if(6===r.$obj(e,1))return Object.keys(e).forEach(t=>{n.setAttribute("data-"+t,e[t])}),!0;if(4==r.$obj(e,1)){let t={};return e.forEach(e=>{t[e]=n.getAttribute("data-"+e)||""}),t}if(!(arguments.length>1))return n.getAttribute(e);n.setAttribute(e,t)},click:function(e,t){arguments.length>0?n.onclick=function(n){let o=this;t>0&&!isNaN(t)&&(o.setAttribute("disabled","true"),setTimeout(()=>{o.removeAttribute("disabled")},1e3*t)),r.focus(o),e(o,n),n.preventDefault(),r.stopBubble(n)}:n.click()},json:function(e){e=e||{},n.innerHTML=r.showJson(e)},width:function(e){if(!arguments.length)return n.clientWidth;n.style.width=isNaN(e)?e:e+"px"},height:function(e){if(!arguments.length)return n.clientHeight;n.style.height=isNaN(e)?e:e+"px"},square:function(e,t){if(!e)return{w:n.clientWidth,h:n.clientHeight};t||(t=e),r.js(n,0).width(e),r.js(n,0).height(t)},rect:function(){return n.getBoundingClientRect()},val:function(e){if(!arguments.length)return n.value;n.value=e},input:function(e){arguments.length&&(n.oninput=function(t){e(this,t)})},keydown:function(e){arguments.length&&(n.onkeydown=function(t){t=t||window.event;var r={event:t,code:t.keyCode,value:this.value,key:t.key,dom:n};e(r,this)})},offset:function(){let e=n.getBoundingClientRect(),t=document.body;return{top:e.top+t.scrollTop,left:e.left+t.scrollLeft,self:{top:e.top,left:e.left}}},child:function(e){return Array.from(e?n.querySelectorAll(e):n.children)},find:function(e,t){let n=r.js(n.querySelector(e),0);return t?n:n.dom()},file:function(e,t,o){t=t||{};let i="file-"+r.rand(1e4,99999),a=r._div("input","m_inp"),l=r._div("label"),s=n.innerText;a.setAttribute("type","file"),a.setAttribute("id",i),t.more&&a.setAttribute("multiple",!0);let c="";switch(t.type){case"txt":c="text/plain";break;case"other":c=t.accept||"";break;default:c="image/*"}t.capture&&a.setAttribute("capture",t.capture),a.setAttribute("accept",c),l.setAttribute("for",i),l.setAttribute("style","display:block"),n.innerHTML="",n.appendChild(a),n.appendChild(l),l.innerHTML=s||"Upload",r.$.id(i)&&r.$.id(i).addEventListener("change",function(){let t={files:this.files,file:this.files[0],time:r.timeout(),id:i,el:n};t.file&&e&&e(t),o&&setTimeout(()=>{r.$.id(i).value=""},500)})},scrollbar:function(){n.clientHeight>n.parentNode.clientHeight&&n.parentNode.classList.add(r.options.prefix+"_scrollbar")}}:{}}loading(e){var t=Object.assign({theme:this.options.theme,dom:"body"},e||{}),n=this,r=n.options.prefix+"_loading",o=n.$.dom("."+r);if(o&&"body"===t.dom)return o.className=r+(""===t.theme?"":" "+t.theme),!1;var i=document.createElement("div");return i.setAttribute("class",r+(""===t.theme?"":" "+t.theme)),t.id&&i.setAttribute("id",n.options.prefix+"-"+t.id),"body"===t.dom?document.body.appendChild(i):(i.setAttribute("style","position:absolute"),n.$.dom(t.dom).appendChild(i)),i}alert(e,t,n,r){var o=Object.assign({title:"",timeout:2e3,screen:0,sty:"alert",btnSuccessText:"确定",btnErrorText:"取消",btnSuccessStyle:"",btnErrorStyle:""},n||{});t=t||0;var i=this,a=null,l=arguments.length>3;o.screen&&(a=i.loading({theme:i.options.theme+" model",id:"loading-"+i.rand(1e3,9999)}));var s=function(e,t){var n=arguments.length;e&&(e.classList.add("hidden"),setTimeout(function(){e&&(i.remove(e),e=null),a&&(i.remove(a),a=null),n>1&&t(),l&&r({code:1,type:"all",status:"remove",options:o.data||{}})},200))};if(t>99){var c=i.js("body").find("[id^='"+i.options.prefix+"-alert-']"),u=i.js("body").find('[id^="'+i.options.prefix+'-loading-"]');return c&&(u&&(a=u),s(c)),u=null,c=null,0}var d=i.options.prefix+"_model."+o.sty,f=i.$.dom("."+d);if(f)return s(f,function(){f=null,i.alert(e,t,n)}),!1;var m=document.createElement("div"),h=["error","success","warning","default"];t=t>=h.length?h.length-1:t,m.setAttribute("class",d.replace("."," ")+" hidden "+h[t]),m.setAttribute("id",i.options.prefix+"-alert-"+i.rand(1e3,9999)),6===i.$obj(e,1)&&(e=JSON.stringify(e));var p="",b="_"+i.rand(1e3,9999)+"-";o.title&&(p+='<h3 class="title">'+o.title+"</h3>"),p+='<i class="close"></i>',p+='<p class="msg">'+(void 0===e?"":e)+"</p>","alert"!==o.sty&&(p+='<div class="btn">',p+='<button class="m_btn '+o.btnSuccessStyle+'" id="'+b+'s">'+o.btnSuccessText+"</button>",p+='<button class="m_btn '+o.btnErrorStyle+'" id="'+b+'e">'+o.btnErrorText+"</button>",p+="</div>"),m.innerHTML=p,document.body.appendChild(m);var g=m.querySelector(".close"),v=m.querySelector("#"+b+"s"),y=m.querySelector("#"+b+"e");"alert"===o.sty&&l&&r({code:1,type:"alert",status:"create",options:o.data||{}}),g&&(g.onclick=function(e){s(m),i.stopBubble(e)}),l&&(r({code:3e3,box:m}),v&&i.js(v,0).click(function(){r({btn:"success",t:v,code:1,box:m,options:o.data||{}}),s(m)}),y&&i.js(y,0).click(function(){r({btn:"error",t:y,code:0,box:m,options:o.data||{}}),s(m)})),setTimeout(function(){m.classList.remove("hidden")},50),o.timeout>500&&i._timers("alert_timer",function(e){e&&s(m)},0,o.timeout)}rand(e,t){return e*=1,1===arguments.length?(e=e>9?9:e<1?1:e,t=1*("1e"+e)-1,e=1*("1e"+(e-1)),Math.floor(Math.random()*(t-e+1)+e)):!t&&arguments.length>1?Math.floor(Math.random()*e):(t*=1,Math.floor(Math.random()*(t-e+1)+e))}remove(e){return e&&e.parentNode&&(e.parentNode.removeChild(e),e=null),1}timeout(e,t,n){function r(e){return"星期"+["日","一","二","三","四","五","六"][e]}function o(e){return e<10?"0"+e:e}function i(e,t,n){return n?e.y+t+e.m:e.y+t+e.m+t+e.d}function a(e,t,n){return n?e.h+t+e.i:e.h+t+e.i+t+e.s}function l(e,t){return e.m+t+e.d}e&&!isNaN(e)||(e=Date.now()),e=parseInt(e),n=n||"/",(e+"").length>10&&(e=Math.floor(e/1e3));var s=new Date(1e3*e),c=s.getDay(),u={y:s.getFullYear(),m:s.getMonth()+1,d:s.getDate(),h:s.getHours(),i:s.getMinutes(),s:s.getSeconds(),ms:s.getMilliseconds(),default:e,w:r(c),week:c};c=null,s=null,e=null,u.m=o(u.m),u.d=o(u.d),u.h=o(u.h),u.i=o(u.i),u.s=o(u.s);var d="";switch(t){case"alls":d=i(u,n)+" "+a(u,":");break;case"ymd":d=i(u,n);break;case"md":d=l(u,n);break;case"his":d=a(u,n);break;case"array":d=[u.y,u.m,u.d,u.h,u.i,u.s,u.ms];break;case"object":d=u;break;case"zero":d=new Date(i(u,"/")+" 00:00:00").getTime();break;case"day":d=u.week;break;case"rotate":d={s:6*u.s,i:6*(u.i+u.s/60),h:30*(u.h%12+u.i/60)};break;default:d=i(u,n)+" "+a(u,":",1)}return d}local(){return this._storage("localStorage")}session(){return this._storage("sessionStorage")}getUrl(e){if(void 0===e)var t=decodeURI(location.search);else t="?"+e.split("?")[1];var n=new Object;if(-1!=t.indexOf("?"))for(var r=t.substr(1),o=r.split("&"),i=0;i<o.length;i++)n[o[i].split("=")[0]]=decodeURI(o[i].split("=")[1]||"");return n}getUrlParam(e,t){var n=window.location.search.substring(1);arguments.length>1&&(n=t.split("?")[1]);for(var r=decodeURI(n),o=r.split("&"),i=0;i<o.length;i++){var a=o[i].split("=");if(a[0]==e)return a[1]}return null}scroll(e,t){if(!this.$scroll)return!1;var n=new this.$scroll(e,Object.assign({scrollX:!1,scrollY:!0,bounce:!0,click:!0,mouseWheel:!0,probeType:1,scrollbar:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|DIV|P)$/}},t||{}));return n}click(e,t){let n=this;if(3===n.$obj(e,1)&&(e=n.js(e).dom()),!(arguments.length>1))return e.click();if(e.length>=1)for(var r=0;r<e.length;r++){let o="data-tab-click-index";e[r].setAttribute(o,r),e[r].onclick=function(e){n.focus(this),t({index:1*this.getAttribute(o),e:e,dom:this}),n.stopBubble(e)}}else e.onclick=function(e){n.focus(this),t({index:0,e:e,dom:this}),n.stopBubble(e)}}class(e){3===this.$obj(e,1)&&(e=this.js(e).dom());var t=[];if(e.length>=1)for(var n=0;n<e.length;n++)t.push(e[n]);else t=[e];return{add(e){if(""===e||!e)return!1;t.forEach(function(t){t&&t.className.indexOf(e)<0&&t.classList.add(e)})},remove(e){if(""===e||!e)return!1;t.forEach(function(t){t&&t.className.indexOf(e)>=0&&t.classList.remove(e)})},name(e){t.forEach(function(t){t&&(t.className=e||"")})}}}ajax(e){var t=this;if(!window.Promise)return{};e=e||"";let n=(n,r,o,i)=>t.copy(Object.assign({url:t.options.api+e,method:n,timeout:r||t.options.ajaxTimeout,headers:o,withCredentials:t.options.ajaxCookie},i)),r=(t={},n="post")=>{this.ajaxData={data:t,time:Date.now(),type:n,url:e}},o=t=>(this.ajaxData=this.ajaxData||{},JSON.stringify(t)===JSON.stringify(this.ajaxData.data)&&e===this.ajaxData.url&&Date.now()<this.ajaxData.time+this.ajaxOnceTime);return{get(e,i,a,l){if(o(e))return this.ajaxData;r(e,"get");var s=t.copy(l||{});"json"===a&&(s["Content-Type"]="application/json"),6===t.$obj(a,1)&&(s=a);var c=arguments.length>1;t.$axios(n("get","",s,{params:e})).then(function(e){200===e.status&&c&&i(e.data)}).catch(function(e){c&&(e.response?i({code:0,data:e.response,err:e.response.data}):i({code:0,data:e,err:e.message}))})},post(e,i,a="",l){if(o(e))return this.ajaxData;r(e);var s=arguments.length>1,c=t.copy(l||{});if("json"===a)c["Content-Type"]="application/json";else if("object"==typeof e){var u="";for(var d in e)u+=d+"="+e[d]+"&";e=u.substring(0,u.length-1)}6===t.$obj(a,1)&&(c=a),t.$axios(n("post","",c,{data:e})).then(function(e){200===e.status&&s&&i(e.data)}).catch(function(e){s&&(e.response?i({code:0,data:e.response,err:e.response.data}):i({code:0,data:e,err:e.message}))})},upload(n,r,o){var i=arguments.length>1,a=new FormData;if(6===t.$obj(n,1))for(let e in n)a.append(e,n[e]);else a=n;var l=t.copy(Object.assign({"Content-Type":"multipart/form-data;boundary="+Date.now()},o||{}));t.$axios({url:t.options.api+e,method:"post",timeout:t.options.ajaxUploadTimeout,headers:l,withCredentials:t.options.ajaxCookie,data:a,onUploadProgress:function(e){var t=parseInt(e.loaded/e.total*100)/100;r({code:2,type:"progress",progress:t})}}).then(function(e){200===e.status&&i&&r(e.data)}).catch(function(e){i&&(e.response?r({code:0,data:e.response,err:e.response.data}):r({code:0,data:e,err:e.message}))})},other(e,i,a,l,s){if(o(i))return this.ajaxData;r(i,e);var c=t.copy(s||{});if("json"===l)c["Content-Type"]="application/json";else if("object"==typeof i){var u="";for(var d in i)u+=d+"="+i[d]+"&";i=u.substring(0,u.length-1)}6===t.$obj(l,1)&&(c=l);var f=arguments.length>1;t.$axios(n(e||"post","",c,{data:i})).then(function(e){200===e.status&&f&&a(e.data)}).catch(function(e){f&&(e.response?a({code:0,data:e.response,err:e.response.data}):a({code:0,data:e,err:e.message}))})}}}jsonp(e,t,n){function r(){return(Math.floor(1e5*Math.random())*Date.now()).toString(16)}function o(e,t){e=e.replace(/=/g,"");var n=[];switch(t.constructor){case String:case Number:case Boolean:n.push(encodeURIComponent(e)+"="+encodeURIComponent(t));break;case Array:t.forEach(function(t){n=n.concat(o(e+"[]=",t))});break;case Object:Object.keys(t).forEach(function(r){var i=t[r];n=n.concat(o(e+"["+r+"]",i))})}return n}function i(e){var t=[];return e.forEach(function(e){"string"==typeof e?t.push(e):t=t.concat(i(e))}),t}return t=t||{},n=n||this.jsonp_timeout,new Promise(function(a,l){function s(e){c(),clearTimeout(h),l({status:400,statusText:"Bad Request"})}function c(){b.removeEventListener("error",s)}if("string"!=typeof e)throw new Error('[jsonp] Type of param "url" is not string.');var u=t.callbackQuery||"callback",d=t.callbackName||"jsonp_"+r();t[u]=d,delete t.callbackQuery,delete t.callbackName;var f=[];Object.keys(t).forEach(function(e){f=f.concat(o(e,t[e]))});var m=i(f).join("&"),h=null;"number"==typeof n&&(h=setTimeout(function(){c(),p.removeChild(b),delete window[d],l({statusText:"Request Timeout",status:408})},n)),window[d]=function(e){clearTimeout(h),c(),p.removeChild(b),a(e),delete window[d]};var p=document.querySelector("head"),b=document.createElement("script");b.addEventListener("error",s),b.src=e+(/\?/.test(e)?"&":"?")+m,p.appendChild(b)})}platform(){var e=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(e){var t=window.navigator.userAgent,n=(window.navigator.appVersion,t.indexOf("Android")>-1||t.indexOf("Linux")>-1),r=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(n)return 1;if(r)return 2}var o=document.body.clientWidth;return o<750?1:0}touch(e,t){function n(n){if(n.preventDefault(),"touchstart"==n.type){var f=n.touches[0];r=Math.floor(f.pageX),o=Math.floor(f.pageY)}else if("touchmove"==n.type){f=n.touches[0];Math.floor(f.pageX),Math.floor(f.pageY)}else if("touchend"==n.type||"touchcancel"==n.type){i=Math.floor(n.changedTouches[0].pageX),a=Math.floor(n.changedTouches[0].pageY),l=i-r,s=a-o,c=180*Math.atan2(s,l)/Math.PI;var m={};Math.abs(l)<=1||Math.abs(s)<=1?m={code:0,text:"点击",dire:"click"}:c<45&&c>=-45?m={code:2,text:"右",dire:"right"}:c<135&&c>=45?m={code:3,text:"下",dire:"down"}:c<=180&&c>=135||c>=-180&&c<-135?m={code:4,text:"左",dire:"left"}:c<=-45&&c>=-135&&(m={code:1,text:"上",dire:"up"}),u=Object.assign(u,m),u.target=e,d>0&&t(u)}}"string"==typeof e&&(e=this.$.dom(e));var r,o,i,a,l,s,c,u={view:["pc","android","iphone"][this.$web],code:-1},d=arguments.length;if(!e||!this.$web)return d>1&&t(u),!1;e.addEventListener("touchstart",n,!1),e.addEventListener("touchmove",n,!1),e.addEventListener("touchend",n,!1)}showJson(e){return"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),e=e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="#ff9b26";return/^"/.test(e)?t=/:$/.test(e)?"#ff4c2f":"#67e66e":/true|false/.test(e)?t="#414fff":/null/.test(e)&&(t="#999"),'<span style="color:'+t+'">'+e+"</span>"})}resize(e,t,n){e=this.$.dom(e)||document.body;var r=arguments.length>1,o={w:e.clientWidth,h:e.clientHeight},i=this;e.onresize=function(){i._timers("resize_timer",function(n){if(n){var i={w:e.clientWidth,h:e.clientHeight};i.h!==o.h&&i.w!==o.w?i.dire="auto":i.w!==o.w?i.dire="width":i.dire="height",r&&t(i)}},0,n||800)}}eval(e){var t=Function;return new t("return "+e)()}frame(e,t){function n(){s=null,c=null,i=null,u=null,d=null,f=null,m=null}e=Object.assign({dom:"body",type:"frame",theme:"shadow_right",title:"Title",header:!0,close:!0,scroll:!1,style:{},move:!1,moveDom:"",id:"frame-"+this.rand(1e3,9999)},e);var r=arguments.length>1,o=(e,t,n)=>({err:e,by:t,code:n||0}),i=o("dom is null","frame-dom"),a=this.$.dom(e.dom);if(!a)return r&&t(i),i;e.theme=e.theme?e.theme+(e.header?"":" auto"):e.header?"":"auto",e.style["z-index"]||(e.style["z-index"]=Math.ceil((Date.now()-new Date(this.timeout("","y/m/d")).getTime())/1e3));var l="";switch(l+=`<div class="${this.options.prefix}_frame${e.theme?" "+e.theme:""} hidden" data-frame id="${e.id}">`,e.header?(l+=`<header class="frame_header"><b>${e.title}</b>`,e.close&&(l+='<span class="close" data-frame-close>X</span>'),l+="</header>"):e.close&&(l+='<span class="close" data-frame-close>X</span>'),l+=`<div class="frame_main" id="${e.id}-main">`,e.type){case"frame":l+=`<iframe src="${e.src}" frameborder="0"></iframe>`;break;case"template":l+=`<div class="content" data-frame-content>${e.template}</div>`;break;default:l+='<div class="content" data-frame-content></div>'}if(l+="</div>",e.foot&&(l+=`<div class="frame_foot" id="${e.id}-foot"></div>`),l+="</div>","frame"===e.type&&!e.src)return i=o("frame src is null","frame-src"),r&&t(i),i;if("template"===e.type&&!e.template)return i=o("frame template is null","frame-template"),r&&t(i),i;a.innerHTML=l,l=null,i=o("frame create end","frame-create",1),r&&t(i);var s=a.querySelector("[data-frame]"),c=a.querySelector("[data-frame-close]"),u=a.querySelector("[data-frame-content]"),d=null,f=null,m=null;if(e.foot&&(f=a.querySelector(".frame_foot"),u.style["padding-bottom"]=f.clientHeight+"px"),e.header&&(m=a.querySelector(".frame_header")),e.style){var h="";for(var p in e.style)p&&(h+=`${p}:${e.style[p]};`);h&&s.setAttribute("style",h)}var b=this;if(s)return c&&(c.onclick=function(e){s.classList.add("hidden"),setTimeout(function(){b.remove(s),i=o("frame is delete","frame-delete",1),r&&t(i),n()},1e3),b.stopBubble(e)}),e.scroll&&u&&(d=b.scroll("#"+e.id+"-main"),i=o("frame scroll is create success","frame-scroll",1),r&&t(i)),e.move&&b.move(s,function(t){t.code?b.js(s,0).style(Object.assign({left:t.left,top:t.top,margin:"0",bottom:"auto",right:"auto",transition:"all 0s"},e.style)):s.style.transition="all .8s"},e.moveDom),i=o("frame all success","frame-all-"+e.type,1),i.dom=s,i.doms={scroll:d,close:c,content:u,header:m,footer:f,main:b.$.id(e.id+"-main")},r&&t(i),setTimeout(function(){s.classList.remove("hidden")},50),i;i=o("frame dom is null","frame-dom-null"),r&&t(i),n()}location(e,t,n){function r(){if(!window.open)return a.alert("window.open is null"),0;let t=null;try{t=window.open("_blank"),t.location=e}catch(e){a.alert("浏览器禁用 window.open")}return t}function o(){return e===window.location.href?(window.location.reload(),!1):"open"===t.target?(r(e),!1):(window.location.href=e,!0)}var i=arguments.length>2;let a=this;if(!e)return!1;if(t=Object.assign({time:0,target:""},t),t.time<1)o();else if(i)var l=1*t.time,s=setInterval(function(){if(l<=0)return clearInterval(s),s=null,o(),!1;i&&n(l),l--},1e3)}tree(e,t,n){t=t||"id",n=n||"by";var r=[];if(!Array.isArray(e))return r;e.forEach(function(e){delete e.children});var o={};return e.forEach(function(e){o[e[t]]=e}),e.forEach(function(e){var t=o[e[n]];t?(t.children||(t.children=[])).push(e):r.push(e)}),r}script(e,t,n){if(!e)return!1;var r=document.createElement("script");r.type="text/javascript",arguments.length>2?r.text=n:(r.async=!0,r.src=e),arguments.length>1&&(r.onload=t);var o=document.getElementsByTagName("script")[0];return o.parentNode.insertBefore(r,o),r=null,o=null,!0}array(e){var t=this;return e.length&&4===t.$obj(e,1)?{rand:function(){var n=t.copy(e);return n.sort(function(){return Math.random()-.5})},agg:function(t){var n={};return t?(e.forEach(function(e){var r=e[t];void 0!==r&&""!==r&&(n[r]?n[r].push(e):n[r]=[e])}),n):n},unique:function(t){if(arguments.length){var n=new Map;return e.filter(function(e){return!n.has(e[t])&&n.set(e[t],1)})}for(var r=[],o=0;o<e.length;o++)-1===r.indexOf(e[o])&&r.push(e[o]);return r},max:function(){return Math.max.apply(null,e)},min:function(){return Math.min.apply(null,e)},sort:function(n){return{reverse:function(){return n?e.sort(function(e,r){return 1===t.$obj(r[n],1)?r[n]-e[n]:r[n].localeCompare(e[n])}):e.sort(function(e,t){return e-t})},sort:function(){return n?e.sort(function(e,r){return 1===t.$obj(e[n],1)?e[n]-r[n]:e[n].localeCompare(r[n])}):e.sort(function(e,t){return t-e})}}},sum:function(t,n){return t=t||0,n=n||0,e.reduce(function(e,t){e+="",t+="";var r="0";e.indexOf(".")>=0&&(r=e),t.indexOf(".")>=0&&(r=t),e.indexOf(".")>=0&&t.indexOf(".")>=0&&(r=e.length>t.length?e:t);var o=0;r.indexOf(".")>=0&&(o=r.length-r.indexOf(".")-1,o=1*("1e"+o),e*=o,t*=o),e*=1,t*=1,o=o<1?1:o;var i=(e+t)/o;switch(n){case 1:i=(e-t)/o;break;case 2:i=e*t/o;break;case 3:i=e/t;break;case 4:i=e/o%(t/o)}return r=null,o=null,i},+t)},chunk:function(t,n){t=t||1,n=n||[];let r=e;if(t<=0)return n;for(;r.length;)n.push(r.splice(0,t));return n},obj:function(t,n){let r={};return e.forEach(e=>{void 0!==e[t]&&(r[e[t]]=e[n])}),r}}:{}}copy(e,t){if(""===e||null==e||NaN===e)return"";let n=e=>{let t;if("object"==typeof e)if(Array.isArray(e)){t=[];for(let r in e)t.push(n(e[r]))}else if(null===e)t=null;else if(e.constructor===RegExp)t=e;else{t={};for(let r in e)t[r]=n(e[r])}else t=e;return t};return t?n(e):JSON.parse(JSON.stringify(e))}font(e,t,n,r){e=e||1920;let o=window.innerWidth,i=o*(100/e);t&&(i=n?e<o?100:i:t),r&&r<i&&(i=r),document.documentElement.style.fontSize=i+"px",this.font_em=!0}fonts(e,t){let n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(!n)return 100*e;t=t||1920;let r=n/t*100;return e*r}cssLazy(e){e=e||"css-lazy";var t=document.head.children,n=!1;if(t.length)for(var r=0;r<t.length;r++)t[r].id===e&&(n=!0);return{link:function(t){if(!t)return 0;if(!n){var r=document.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("id",e),r.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(r),r=null}},text:function(t){if(!t)return 0;if(!n){var r=document.createElement("style");r.setAttribute("type","text/css"),r.setAttribute("id",e);try{r.appendChild(document.createTextNode(t))}catch(e){style.styleSheet.cssText=t}document.getElementsByTagName("head")[0].appendChild(r),r=null}}}}refresh(e){let t=this;return t.alert_timer=null,t.resize_timer=null,t.toast_timer=null,t.jsonp_timeout=8e3,t.options.scroll&&window.BScroll&&(t.$scroll=window.BScroll),t.options.ajax&&window.axios&&(t.$axios=window.axios),console.log("%c 欢迎使用！当前版本：%c"+t.version+"。%c 更新时间："+t.__TIME__,"color:tomato","color:green","color:orange"),t.options.debugger&&(console.log("%c 禁止调试！","color:orange"),setInterval(function(){var e=Date.now();return e},100)),e||console.log("%c 重置成功","color:#99cc33"),{option:t.options,scroll:t.$scroll||"",ajax:t.$axios||"",ver:t.version}}focus(e){return 3===this.$obj(e,1)&&(e=this.$.dom(e)),e.blur?e.blur():this.$.dom("body").focus(),e}access(e,t,n){let r="接入成功";return this[e]?(r="该方法已存在",n&&n({c:!1,m:r}),r):(this[e]=t,n&&n({c:!0,m:r}),r)}move(e,t,n){if(n&&3===this.$obj(n,1)&&(n=this.$.dom(n)),3===this.$obj(e,1)&&(e=this.$.dom(e)),!e)return null;var r=n?n.clientWidth:window.innerWidth,o=n?n.clientHeight:window.innerHeight;e.onmousedown=function(n){var i=n||window.event,a=i.clientX-e.offsetLeft,l=i.clientY-e.offsetTop;void 0!==e.setCapture&&e.setCapture();var s=0,c=0;document.onmousemove=function(n){var i=n||window.event,u=i.clientX-a,d=i.clientY-l;u=u>r-e.offsetWidth?r-e.offsetWidth:u<0?0:u,d=d>o-e.offsetHeight?o-e.offsetHeight:d<0?0:d,s=u,c=d,t&&t({left:u+"px",top:d+"px",code:1})},document.onmouseup=function(){this.onmousemove=null,this.onmouseup=null,void 0!==e.releaseCapture&&e.releaseCapture(),t&&t({left:s,top:c,code:0}),s=null,c=null}}}ctrl(){let e=this,t="position: fixed;left: -100vw;top: -100vh;z-index: -1000";return{c:function(n,r){let o=r,i=document.execCommand("copy");if(!i)return e.alert("不支持"),0;if(n)try{3===e.$obj(n,1)&&(n=e.$.dom(n)),o=n.getAttribute("data-copy")||""}catch(e){o=""}let a=e._div("textarea"),l="copy-"+Date.now()+"-"+e.rand(6);return a.value=o||"copy",a.setAttribute("id",l),a.setAttribute("style",t),e.$.dom("body").appendChild(a),a.select(),document.execCommand("copy"),setTimeout(()=>{e.remove(a)},300),1},r:function(t,n,r){function o(){u&&(clearTimeout(u),u=null)}if(3===e.$obj(t,1)&&(t=e.$.dom(t)),n=Object.assign({item:[]},n),!n.item.length)return t.oncontextmenu=function(){return r&&r({type:"right"}),!1},1;let i=e._div("div",e.options.prefix+"_right"),a=n.item.length>6?"scroll":"";n.id=n.id||"right-menu-"+Date.now()+"-"+e.rand(6),i.setAttribute("id",n.id);let l='<i class="close fa fa-close"></i><i class="before fa fa-hand-o-up"></i><div class="tab '+a+'"><ul>';n.item.forEach((e,t)=>{l+='<li><span title="'+e.text+'" data-index="'+t+'">'+e.text+"</span></li>"}),l+="</ul></div>",i.innerHTML=l,e.$.dom("body").appendChild(i);let s="#"+n.id,c=null,u=null,d=n.timeout||3e3;d=d<100?100:d,a&&(c=e.scroll(s+" .tab",{})),e.click(s+" .close",()=>{o(),e.js(s).style({opacity:0})}),e.click(e.$.all(s+" .tab li span"),t=>{let o=t.dom.getAttribute("data-index"),i={data:e.copy(n.item[1*o]),type:"click",scroll:c,res:t,leave:d};i.data.callback&&delete i.data.callback,n.item[o].callback?n.item[o].callback(i):r&&r(i),e.click(s+" .close"),i=null}),t.oncontextmenu=function(t){return e.js(s).style({left:t.clientX+"px",top:t.clientY+"px"}),!1},e.$.dom(s).oncontextmenu=function(){return!1},e.hover(s,()=>{o()},()=>{o(),u=setTimeout(()=>{e.click(s+" .close")},d)})},d:function(t,n){let r=(3===e.$obj(t,1)?t.split(","):t)||[],o=[];r.length&&(o=r.map(e=>{let t=(e+"").split("-"),n={c:"c"===t[0],s:"s"===t[0]};return n.key=t[1]||t[0],n})),r.indexOf("right")>=0&&(document.oncontextmenu=function(){return!1}),document.onkeydown=function(e){let t=e.key.toLowerCase(),i=o.filter(n=>n.key.toLowerCase()===t&&e.ctrlKey===n.c&&e.shiftKey===n.s);if(r.indexOf("f12")>=0&&e.ctrlKey&&e.shiftKey&&"i"===t)return n&&n({key:"f12"}),!1;if(i.length){if(i=i[0],e.ctrlKey===i.c&&t===i.key&&!i.s)return n&&n(i),!1;if(e.shiftKey===i.s&&!i.cal&&t===i.key)return n&&n(i),!1}return!0}},k:function(n,r,o){3===e.$obj(n,1)&&(n=e.$.dom(n));let i="ctrl-k-input-keydown";var a=function(e,t,n){return{code:t,key:e,val:n}};e.js(n,0).click(n=>{e.$.id(i)&&e.js("#"+i).remove();let l=e._div("input","m_inp");l.setAttribute("id",i),l.setAttribute("style",t),l.setAttribute("autocomplete","off"),n.appendChild(l),l.focus();let s=[];l.onkeydown=function(e){let t={};if(!e.shiftKey&&!e.ctrlKey){let n=e.keyCode;switch(n){case 38:case 87:case 104:t=a("up",0,n);break;case 39:case 68:case 102:t=a("right",1,n);break;case 40:case 83:case 98:t=a("bottom",2,n);break;case 37:case 65:case 100:t=a("left",3,n);break;default:t=a(e.key,4,n)}}l.value="",o&&(t.event=e,s.push(t.key),t.his=s),r&&r(t),t=null}})}}}algorithm(){let e=this;return{rgb:function(t,n){return t=t||0,n=n||255,"rgb("+e.rand(t,n)+","+e.rand(t,n)+","+e.rand(t,n)+")"},rgba:function(t,n,r){return n=n||0,r=r||255,t=t||.1,"rgba("+e.rand(n,r)+","+e.rand(n,r)+","+e.rand(n,r)+","+t+")"},color:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)},gradients:function(...t){let n=t[0],r=t;return 1===e.$obj(n,1)?r=r.splice(1):n=0,r=r.filter(t=>3===e.$obj(t,1)&&""!==t),r.length<2&&(r=[e.algorithm().rgb(),e.algorithm().rgb()]),r=r.join(","),"linear-gradient("+n+"deg,"+r+")"}}}cookie(){let e=this,t=function(t){return e.options.prefix+"_"+t},n=function(e){return e?e.replace(t(""),""):""};return{set:function(n,r,o){o=o||"d7";let i=o.substr(0,1),a=o.substr(1);a=isNaN(a)?7:1*a;let l=1e3*("d"===i?86400:"h"===i?3600:1)*a,s=new Date;return s.setTime(s.getTime()+l),7!==e.$obj(n,1)&&7!==e.$obj(r,1)&&(document.cookie=t(n)+"="+escape(r)+";expires="+s.toGMTString()),i=null,a=null,l=null,s=null,!0},get:function(r,o){let i=e.cookie().getter(r);if(o)return i;let a=e.$obj(i,1);return 6===a?i.key=n(i.key):4===a&&(i=i.filter(e=>0===e.key.indexOf(t(""))),i=i.map(e=>(e.key=n(e.key),e))),i},getter:function(n){let r=document.cookie||"";return r=r.split(";"),r.length?(r=r.map(e=>{let t=e.split("=");return{key:t[0].trim(),val:unescape(t[1])}}),r=r.filter(e=>""!==e.key),3===e.$obj(n,1)?(r=r.filter(e=>e.key===t(n)),r[0]||{}):r):[]},del:function(n){let r=new Date;r.setTime(r.getTime()-1);let o=e.cookie().getter(n).val;return null!=o&&(document.cookie=t(n)+"="+escape(o)+";expires="+r.toGMTString()),r=null,o=null,!0},clear:function(){let r=e.cookie().getter();return r.length&&(r=r.filter(e=>0===e.key.indexOf(t(""))),r.length&&r.forEach(t=>{e.cookie().del(n(t.key))})),r=null,!0}}}const(e,t){if(this[e])return!1;try{Object.defineProperty(this,e,{enumerable:!0,value:t,configurable:!1,writable:!1})}catch(e){console.log(e+"")}}toast(e,t){let n=this,r=n.options.prefix+"_toast",o=n.$.dom("."+r),i=n.$obj(e,1),a=isNaN(t)?3e3:t<1e3?1e3:+t,l=t=>{4===i||6===i?n.js(t,0).json(e):t.innerHTML=e},s=t=>{0===n.$web?n.class(t).add("pc"):n.font_em&&n.class(t).add("em"),n.class(t).add("show"),null!==n.toast_timer?(clearTimeout(n.toast_timer),c(t)):c(t),t.onclick=(t=>{let r=e;4!==i&&6!==i||(r=JSON.stringify(e)),n.ctrl().c("",r),n.log("copy success",1).log(r,0).log("",3),n.stopBubble(t)})},c=e=>{n.toast_timer=setTimeout(()=>{n.class(e).remove("show"),clearTimeout(n.toast_timer),n.toast_timer=null},a)};if(o)l(o),s(o);else{let e=n._div("div",r);l(e),n.js("body").appendChild(e),s(e)}}stopBubble(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0}stopDefault(e){return e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1,!1}delay(e,t){e=this.copy(Object.assign({timeout:5,name:"delay",type:"get",item:""},e||{}));let n=this.options.prefix+"-delay-"+e.name,r=Date.now(),o=this.$local.get(n)||{};"set"===e.type?(o.item=e.item,o.time=r,this.$local.set(n,o),t&&t({code:0,data:o.item})):!o.time||+o.time-6e4*e.timeout>r?(this.$local.clear(n),t&&t({code:1,data:o})):t&&t({code:0,data:o.item})}title(e){this.js("title").html(e||"title")}countTo(e,t,n,r){if(n=n||0,r=r||300,isNaN(e))return t&&t(e),e;let o=e-(isNaN(r)?300:+r);o=o>0?o:0;let i=r=>{if(r>e)return 0;let o=setTimeout(()=>{t&&t(r),r++,clearTimeout(o),i(r)},isNaN(n)?0:+n)};i(o)}random(){let e=this,t=(t,n)=>{t=isNaN(t)?Math.random():t,n=isNaN(n)?Math.random():n;let r="qwertyuiopasdfghjklzxcvbnm",o="0123456789",i=t>.5?r.charAt(e.rand(0,r.length-1)):o.charAt(e.rand(0,o.length-1));return n>.5?i.toUpperCase():i.toLowerCase()},n=e=>{e=isNaN(e)?6:e,e=e<1?1:e;let n=t(1);for(let r=0;r<e-1;r++)n+=t();return n},r=(t,o)=>{let i=t||n(),a=e.$obj(e.fictitious[i],1);return 7===a?(e.fictitious[i]=0,i):1===a?(o?e.fictitious[i]=0:e.fictitious[i]++,i):r()};return{mock:t,vars:n,produce:r}}clickMore(e,t,n,r,o){let i=this;n=isNaN(n)?1:n<1?1:n,r=isNaN(r)?-1e3:r;let a=i.random().produce(e);if(n<=i.fictitious[a])return t&&t(!0,0),i.fictitious[a]=r||0,0;if(o)return 0;let l=i.fictitious[a];l=l<=0?-1*l+n:n-l,t&&t(!1,l)}mouseWheel(e,t,n){let r=this,o=t||500;n=n||"wheel_timer",o=o<10?10:isNaN(o)?10:+o,r.access(n,null);let i=(t,i)=>{r._timers(n,n=>{1===n&&e&&e({err:t,type:i})},1,o)};var a=function(e){e=e||window.event,e.wheelDelta?(e.wheelDelta>0&&i("上",0),e.wheelDelta<0&&i("下",1)):e.detail&&(e.detail>0&&i("上",0),e.detail<0&&i("下",1))};document.addEventListener&&document.addEventListener("DOMMouseScroll",a,!1),window.onmousewheel=document.onmousewheel=a}styleToObj(e){function t(e,t){var n;return n=e.replace(/(^\s+)|(\s+$)/g,""),t&&"g"===t.toLowerCase()&&(n=n.replace(/\s/g,"")),n}if(!e||""===e)return;var n=e.split(";");n=n.filter(e=>""!==e);let r="";return n.forEach(e=>{let n="";t(e).split(":").forEach(e=>{n+='"'+t(e)+'":'}),r+=n+","}),r=r.replace(/:,/g,","),r=r.substring(0,r.lastIndexOf(",")),r="{"+r+"}",JSON.parse(r)}plug(){let e=this,t=0;return"qwertyuiopasdfghjklzxcvbnm".toUpperCase().split("").forEach(n=>{let r="Demo_"+n;"function"==typeof window[r]&&(t++,e.access(n,e.eval(r)(e)))}),t}into(e,t){let n=this,r=n.$obj(e,1),o=[],i=e=>{let t=["es6","es6,pwd,month","es6,pwd,month,vue,vx"];return(t[e]||t[0]).split(",")};1===r?o=i(e):3===r?o=[e]:4===r&&(o=[...e]);let a=0,l=o.length,s=null,c=()=>{s&&(clearTimeout(s),s=null),s=setTimeout(()=>{a!==l&&t&&t(),clearTimeout(s),s=null},3e3)};o.forEach(e=>{n.script(n.__WWW__+"js/base/"+e+"/"+e+".min.js",()=>{let r=n.eval("demo_"+e);n.access(e,r),a++,l<=a?(a=0,t&&t(),clearTimeout(s)):c()})})}storageName(e,t){let n=this;return n.options.name=e,this.version_ls=t||"",n.$local=n.local(),n.$session=n.session(),n}_init(e){let t=this;t.$obj=((e,n)=>{let r=t._is_obj(e);return n?r.code:r}),t.$model=t._model(),t.$fixed=t._fixed(),t.$web=t.platform(),t.$local=t.local(),t.$session=t.session(),t.$ctrl=t.ctrl(),t.$alg=t.algorithm(),
t.$config=t._config(),t.$cookie=t.cookie(),t.$random=t.random(),t.$params=t.getUrl(),t.const("__TIME__","2022-11-03 10:00:00"),t.const("__WWW__","http://"+(window.origin.indexOf("127.0.0")>=0?"127.0.0.5/1996":"180.76.128.134:1996")+"/"),t.font_em=!1,t.fictitious={},t.plug(),e(t.refresh(1))}_fixed(){var e=this;return{bgc(t,n){if(n=n||"body",3===e.$obj(n,1)&&(n=e.$.dom(n)),6===e.$obj(t,1)){var r="";for(var o in t)r+=`${o}:${t[o]};`}else t=t.replace("background:",""),r="background:"+t;if(n){var i=e.options.prefix+"_fixed";e.$.dom("."+i)&&e.js("."+i).remove();var a=e._div("div",i);a.setAttribute("style",r),n.appendChild(a),a=null}},image(t,n){if(n=n||"body",3===e.$obj(n,1)&&(n=e.$.dom(n)),n){var r=e.options.prefix+"_fixed";e.$.dom("."+r)&&e.remove("."+r);var o=e._div("div",r);o.setAttribute("style","background:url('"+t+"') no-repeat 0 0 transparent scroll;background-size:100% 100%"),n.appendChild(o),o=null}},gray(t){let n="css-lazy-gray";if(t)try{e.js('style[id="'+n+'"]').remove()}catch(e){}else e.cssLazy(n).text("html{filter:grayscale(1);}")}}}_model(){var e=this;return{success(t,n){e.alert(t,1,{title:n})},error(t,n){e.alert(t,0,{title:n})},warning(t,n){e.alert(t,2,{title:n})},model(t,n,r,o){var i=arguments.length;o=void 0===o?3:o,e.alert(n,o,{title:t,sty:"model",timeout:0},function(e){i>2&&(e.time=Date.now(),r(e))})},popup(t,n,r){e.alert(t,3,{sty:"model",timeout:0,screen:!!r},function(t){3e3===t.code?e.js(t.box,0).addClass("popup"):n&&n(t)})},info(t,n,r){r=r||0,n=void 0===n?1:n,e.alert(t,n,{timeout:r})}}}_timers(e,t,n=1,r){var o=this;null!==o[e]&&n&&(clearTimeout(o[e]),o[e]=null),t(0),o[e]=setTimeout(function(){clearTimeout(o[e]),o[e]=null,t(1)},r||500)}_storage(e){function t(){var t=window[e].getItem(a)||"{}";try{t=JSON.parse(t)}catch(e){t={}}return t}function n(t){return t?(window[e].setItem(a,JSON.stringify(t)),t):0}function r(e,t){var n=s.$obj(l[e],1);return n>6||5===n?t:l[e]}function o(){l=t()}let i=this.version;i=this.version_ls?this.version_ls:i.split(".").splice(0,2).join("");var a=(this.options.name+"storage"+i.replace(/\./g,"")).toUpperCase(),l=t(),s=this;return{all:function(){return o(),l},get:function(e,t=""){return o(),r(e,t)},set:function(e,t){return e||(e=s.options.prefix+"-null"),o(),l[e]=t,n(l)},clear:function(e){return o(),4===s.$obj(e,1)&&e.length?e.forEach(function(e){l[e]=null,delete l[e]}):(l[e]=null,delete l[e]),n(l)},reset:function(){return n({})}}}_style(e,t){if(6===this.$obj(t,1))for(var n in t)e.style[n]=t[n]}_config(){function e(e){return 7===n.$obj(r[e],1)}function t(e){return 3===n.$obj(e,1)}let n=this,r=n.$local.get("config",{});return{delete:function(t){return e(t)?0:(delete r[t],n.$local.set("config",r),1)},add:function(o,i){return t(o)&&e(o)?(r[o]=i,n.$local.set("config",r),1):0},edit:function(o,i){return t(o)&&!e(o)?(r[o]=i,n.$local.set("config",r),1):0},select:function(n){return e(n)?t(n)?"":r:r[n]},switch(e,t,r){let o=n._config()[e];return"switch"!==e&&o?o(t,r):0}}}_is_obj(e){var t=0,n="";switch(Object.prototype.toString.call(e)){case"[object Number]":t=1,n="number";break;case"[object Boolean]":t=2,n="boolean";break;case"[object String]":t=3,n="string";break;case"[object Array]":t=4,n="array";break;case"[object Function]":t=5,n="function";break;case"[object Object]":t=6,n="object";break;case"[object Undefined]":t=7,n="undefined";break;case"[object Null]":t=8,n="null"}return{code:t,type:n}}_div(e,t,n){var r=document.createElement(e||"div"),o=this.$obj(n,1);return 7!==o&&(4!==o&&6!==o||(n=JSON.stringify(n)),r.appendChild(document.createTextNode(n))),o=null,r.setAttribute("class",t||""),r}}"undefined"==typeof selfDemo&&(window.demo||(window.demo=new Demo));